(this.webpackJsonpevent=this.webpackJsonpevent||[]).push([[2],{40:function(t,e,n){"use strict";n.r(e);var s=n(45),a=n(43),r=n(44),i=n(0),c=n(1);e.default=function(t){var e=Object(i.useState)(null),n=Object(r.a)(e,2),o=n[0],l=n[1],m=Object(i.useState)({src:"https://allods.mail.ru/media/originals/5fca168ceae6e.jpg",partsX:10,partsY:5,precision:1,isFinished:!1}),u=Object(r.a)(m,2),p=u[0],h=u[1],d={elements:[],setElements:function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=function(n){t.elements[n]=new Array;for(var s=function(s){var r={top:{min:100*-n/e.partsY,max:100-100*(n+1)/e.partsY},left:{min:100*-s/e.partsX,max:100-100*(s+1)/e.partsX}},i=Math.round(r.top.min+Math.random()*(r.top.max-r.top.min))+"%",o=Math.round(r.left.min+Math.random()*(r.left.max-r.left.min))+"%";console.log(i,o,r),t.elements[n]=[].concat(Object(a.a)(t.elements[n]),[{status:!1,element:Object(c.jsx)("img",{src:p.src,alt:"Image content error ".concat(n,"/").concat(s),draggable:!1,style:{position:"absolute",display:"block",top:i,left:o,maxHeight:"100%",maxWidth:"100%",zIndex:0,clipPath:"polygon(".concat(100*s/e.partsX,"% ").concat(100*n/e.partsY,"%, ").concat(100*(s+1)/e.partsX,"% ").concat(100*n/e.partsY,"%, ").concat(100*(s+1)/e.partsX,"% ").concat(100*(n+1)/e.partsY,"%, ").concat(100*s/e.partsX,"% ").concat(100*(n+1)/e.partsY,"%)")},onDragStart:function(t){t.preventDefault()},onLoad:function(a){a.target.addEventListener("mousedown",(function r(i){a.target.removeEventListener("mousedown",r);var c=i.currentTarget;c.style.zIndex++;var o=i.currentTarget.clientWidth*(s+.5)/e.partsX,l=i.currentTarget.clientHeight*(n+.5)/e.partsY,m=function(t,e){var n=t-o,s=e-l;return c.style.left=n+"px",c.style.top=s+"px",{x:n,y:s}};d.updateElementStatus([n,s],!1);var u=function(t){m(t.clientX,t.clientY)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",(function i(p){c.style.zIndex--;var h={element:{x:p.clientX-o,y:p.clientY-l},precision:{x:.5*p.target.clientWidth/e.partsX*e.precision,y:.5*p.target.clientHeight/e.partsY*e.precision},getElement:function(){var t=this.element.x*this.element.x+this.element.y*this.element.y;return Math.sqrt(t)},getPrecision:function(){var t=this.precision.x*this.precision.x+this.precision.y*this.precision.y;return Math.sqrt(t)}};if(h.getElement()<=h.getPrecision()){var d=(s+.5)*p.target.clientWidth/e.partsX,f=(n+.5)*p.target.clientHeight/e.partsY;m(d,f),t.updateElementStatus([n,s],!0)}document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",i),a.target.addEventListener("mousedown",r)}))}))}},"".concat(n,"/").concat(s))}])},r=0;r<e.partsX;r++)s(r)},s=0;s<e.partsY;s++)n(s)},get:function(){return this.elements.map((function(t){return t.map((function(t){return t.element}))}))},updateElementStatus:function(t,e){this.elements[t[0]][t[1]]=Object(s.a)(Object(s.a)({},this.elements[t[0]][t[1]]),{},{status:e});for(var n=!0,a=0;a<this.elements.length;a++)for(var r=0;r<this.elements[a].length;r++)!1===this.elements[a][r].status&&(n=!1);n&&this.setPassed()},setPassed:function(){var t=Object(c.jsx)("img",{src:p.src,alt:"Image content error",style:{maxHeight:"100%",maxWidth:"100%"}});l(t),p.callback&&p.callback()}};return Object(i.useEffect)((function(){h(Object(s.a)(Object(s.a)({},p),t.settings))}),[t]),Object(i.useEffect)((function(){p.isFinished?d.setPassed():(d.setElements(p),l(d.get()))}),[p]),Object(c.jsx)("div",{style:{maxHeight:"inherit",maxWidth:"inherit"},children:o})}}}]);
//# sourceMappingURL=2.9c1c8092.chunk.js.map